// http ëª¨ë“ˆ : í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ì„œë²„ëŠ” ìš”ì²­ì˜ ë‚´ìš©ì„ ì½ê³  ì²˜ë¦¬í•œ ë’¤ ì‘ë‹µ
console.log("ì²« ë…¸ë“œ ì‹¤í–‰");

// node ê¸°ë°˜ìœ¼ë¡œ BackEnd ì„œë²„ ë§Œë“¤ê¸°

// require(ëª¨ë“ˆì´ë¦„); : Nodejsì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” ëª…ë ¹ì–´

// require : ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥
// http ëª¨ë“ˆ : í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ ë°›ê³  ì‘ë‹µí•´ì£¼ëŠ”(ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤) ì„œë²„ì˜ ê¸°ë³¸ ëª¨ë“ˆ
const http = require("http") // http ëª¨ë“ˆ ì‚¬ìš©

// http.createServer : ì„œë²„ ìƒì„±(í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œë” ì„œë²„ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤)
http.createServer(function(request, response){ // call back í•¨ìˆ˜ : íŠ¹ì • í•¨ìˆ˜ ì•ˆì—ì„œ í˜¸ì¶œë˜ì—¬ ì‹¤í–‰ ë˜ì–´ì§€ëŠ” í•¨ìˆ˜
    // request : ìš”ì²­(í´ë¼ì´ì–¸íŠ¸ -> ì„œë²„) ì •ë³´
    // response : ì‘ë‹µ(ì„œë²„ -> í´ë¼ì´ì–¸íŠ¸)

    // ìš”ì²­ ì •ë³´ í™•ì¸
    let ip = request.connection.remoteAddress // ìš”ì²­ì„ ë°›ì€ ì£¼ì†Œ ê°’ì„ í™•ì¸
    console.log(ip)

    // ì‹¤ìŠµ ë¬¸ì œ(ipë¡œ ë¬¸êµ¬ ë‹¤ë¥´ê²Œ ë„ìš°ê¸°)
    if (ip == "::ffff:192.168.219.59") {
        console.log('ì´ë°˜ì„ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤ğŸ‰')
    } else if (ip == "::ffff:192.168.219.46") {
        console.log('ì„ ìƒë‹˜ í™˜ì˜í•©ë‹ˆë‹¤')
    } else {
        console.log('ì†ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤')
    }

    console.log('ì„œë²„ ì‹¤í–‰ ì¤‘ ì…ë‹ˆë‹¤') // ì„œë²„ ì˜ì—­ì´ê¸° ë•Œë¬¸ì— ì½˜ì†”ì— ëœ¨ì§€ ì•ŠìŒ!

    // 200 -> ì •ìƒ ì‘ë‹µ
    response.writeHead(200, {"Content-Type":"text/html; charset=utf-8"})
    response.write("<h1>ì‘ë‹µì„±ê³µ</h1>")

    response.end(); // ì—¬ê¸°ê¹Œì§€ ì‘ë‹µì„ ë§ˆë¬´ë¦¬ í•˜ê² ë‹¤!!

}).listen(3001); // .listen(3001) : portë²ˆí˜¸ ì„¤ì • (ì‚¬ìš©ìì˜ ìš”ì²­ ëŒ€ê¸°ì‹œì‘)

// URL : í•´ë‹¹í•˜ëŠ” ì£¼ì†Œë¡œ ì»´í“¨í„° ì„œë²„ì— ì ‘ê·¼í•˜ê² ìŠµë‹ˆë‹¤!(ìš”ì²­ì„ ë³´ë‚´ê² ìŠµë‹ˆë‹¤)

// url ì£¼ì†Œ(ë™ì¼í•œ ì£¼ì†Œì„)
// http://localhost:3001
// http://127.0.0.1:3001
// http://192.168.219.52:3001

// http : í”„ë¡œí† ì½œ
// ip : ë‚´ ì»´í“¨í„° ì£¼ì†Œ(localhost)
// Port : nodejs ì‘ì—…ì„ í•  ìˆ˜ ìˆëŠ” ë°©